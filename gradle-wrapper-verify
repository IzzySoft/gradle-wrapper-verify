#!/bin/bash
# SPDX-FileCopyrightText: 2023 FC Stegerman <flx@obfusk.net>
# SPDX-License-Identifier: GPL-3.0-or-later
set -e
# cut -d= -f2 < gradle-wrapper-checksums | sort | uniq
sha256sums=(
  020ef0245a07b33ca48b12f59415e7e5083cf701ef02690464a8cc2ab3984608
  080e30657661539701b66827b96eb0043191e0a7a73090e8a57bd6735e5af5c5
  0bc7b16a0a3fa52af674de44d1fea48abc4dee3431f3d4829cd9ea329836e596
  0c3c576e28b44eddcab6b8b4854f484363dfbcd047657d41654e839835da2c53
  0f49043be582d7a39b671f924c66bd9337b92fa88ff5951225acc60560053067
  134337ea7c13221f9d1a1c14288a5cf8af9f6060167b903b724b115cf5a0cf73
  13f23a24252ddca0a0fabef212e3c854f5895b081c09d015c91587a5df9bf9f7
  16caeaf66d57a0d1d2087fef6a97efa62de8da69afa5b908f40db35afc4342da
  198159fcd7d29533c0d37423d66c44729982d5280c9e2c7c5f4b7bc6a9317f6b
  1cef53de8dc192036e7b0cc47584449b0cf570a00d560bfaa6c9eabe06e1fc06
  22c56a9780daeee00e5bf31621f991b68e73eff6fe8afca628a1fe2c50c6038e
  28b330c20a9a73881dfe9702df78d4d78bf72368e8906c70080ab6932462fe9e
  33ad4583fd7ee156f533778736fa1b4940bd83b433934d1cc4e9f608e99a6a89
  381dff8aa434499aa93bc25572b049c8c586a67faff2c02f375e4f23e17e49de
  383f4efa709b52632a520708e8a07353961970941ab3867ab8ac182132ce1c54
  3888c76faa032ea8394b8a54e04ce2227ab1f4be64f65d450f8509fe112d38ce
  3bf04e39ed259ff0a1217a875199a11775855d2a29207b98318ac79178249de8
  3dc39ad650d40f6c029bd8ff605c6d95865d657dbfdeacdb079db0ddfffedf9f
  4160d5a6d8d6efc6af336582bbbba8194e4d7a742835f7b0fd3964cbd419c994
  42d7a2f636983aa09d21dfeb6e90d21d7a8dad905351390643ce60cc82c8f8a9
  4894520b03c007bf38e983bf933320c483a9790010d997029fa8985dc6128559
  4e318d74d06aa7b998091345c397a3c7c4b291b59da31e6f9c772a596711acac
  53aa048fef3c06a8442c6a44df5edd2e8c791ee883e42ded6189c7eed112095d
  575098db54a998ff1c6770b352c3b16766c09848bee7555dab09afc34e8cf590
  577b2de036000db2e0f04f2ec842a4f1e648c8b6f9c87f29a8d896acb1732538
  5c91fa893665f3051eae14578fac2df14e737423387e75ffbeccd35f335a3d8b
  5e27c39c2336c25748f279d8b105162d14b1a39eb7839d0b658432282d0ce79f
  5f73d431fd1c5dcc2cf11555b8e486c43249c1099f678ccc6088b05be600a2e1
  660ab018b8e319e9ae779fdb1b7ac47d0321bde953bf0eb4545f14952cfdcaa3
  66dbcc9f0bc33789ea0bdb4d49c8ea037047bda5647ef696c47bdca65f785159
  695089a2b306f55f0bd63140fbcc5ead8c383819018188ce484cd5a055bec6e4
  6a6c15e222a0458aa33985b87f67954f4222410b43b1e26866197d0a77d93cbc
  70239e6ca1f0d5e3b2808ef6d82390cf9ad58d3a3a0d271677a51d1b89475857
  718d7b25ea60b357fc4cb2212ce10b3f03dfd0e6fe5f23f565b15553ec46bb7e
  76b12da7f4a7cdd025e5996811a2e49bf5df0fb62d72554ab555c0e434b63aae
  778e7f46bd67eaea2de5bcbdbb40878c6614656014ba59a72ce8648eaf43a925
  7af529cc3331d38b3d8f8344ddd9b2d3744542b55b68318abd8bb1a6f3812a1c
  7d6fe0a055f133226409de2457fb0e887d1f6b096f36c8d5fd76fb7a9357cd45
  80a33ca14e3bca3116bc8749550397f739f126190c82bb6399fdc8d10f49661f
  87e50531ca7aab675f5bb65755ef78328afd64cf0877e37ad876047a8a014055
  88b5b31f390a268ab3773df580d83fd1e388f49c2b685f78a16600577bd72fe2
  8e47da0b2656354d059609cae9d44b196d4f9b14512e688ffee4e0eb7e723ae9
  8ff6bee43c55efc0cce9e1147860a76fc970398fbef587e64b6e7a5a7e0291df
  91941f522fbfd4431cf57e445fc3d5200c85f957bda2de5251353cf11174f4b5
  91a239400bb638f36a1795d8fdf7939d532cdc7d794d1119b7261aac158b1e60
  95513eccca99e1ae1aeadc4f69cabd0e7fb64821d3f26c46a489df844c8a7353
  9598ffdf7ee26949d8b861ece267c70c802f21f7fc52596693834792d155195a
  96f793a18e056c23ffeec67c1f3bb8eccff5a4a407fc9ceac183527e7eedf4b6
  98420079ffe3e24b1013180d9b9bc2e2ee6a9d867ee232004b75a961d9c18e27
  a14b54dd3790f5ce1dc08ebbf4b5bcc05f76c4554b43accb84696c970f29aba0
  ad63ba21fb91e490e0f6fd0ca7d4049241f0f68a454b0b3075c041c4554e611c
  b18a1114ebe81fb7502d40ad9a4f86cef82fff244a865ad45533b4d5e7ff0cc8
  b5ca811c057b3eb4164c78f4155d667c6092ff98ba91a4c90d29e127426f37a7
  b92386e36a96da6be89e91f71087d1394a26c0450231ba0b22e28ee1ee8fa14b
  ba496e7e0e03ffa432eaf715bb1466fac2ffc8491a71e7164a5438c48c79d8ea
  c536e519e65a4bb787e071c6a90d23bd219c9d409a2123db649d3684acbf3ae7
  c5a643cf80162e665cc228f7b16f343fef868e47d3a4836f62e18b7e17ac018a
  c95985b7b5684e133c5d45044fd90faaf6c8f7cd2493d61a11c2b8c5b71ef514
  d283a04caee0e97b666b09e50ab394834934bee6225c2e9cd4650afdeac43828
  d2d3abae74e89cc4200f48d4a08a7e5960363c33ee62272ef5ffbb39f4c7f83e
  d7e1975ccf2dc079d4f0b1010febdad466506d1565c5aa8017c88ebc5e471604
  d8a69ca8efe271d8de080c42a2ea4b08fc9e85c41aa2d163255c70d9da239db0
  dea5ceba47b58df0b7f69a65b24357527c1927ccc72b6d4ed90658d39e461b29
  e55e7e47a79e04c26363805b31e2f40b7a9cc89ea12113be7de750a3b2cede85
  e996d452d2645e70c01c11143ca2d3742734a28da2bf61f25c82bdc288c9e637
  f1a597a1f2b23089deec11d5b924d074f9e4ed810f2093be7021ded01c8073ad
  f4d953f31fbf6c38a8c330d19171c8ba6e0d1ff59d4d5c5c2d3ed821c9f3d5a3
  fa9b4294d47cf8db7039cb9b2435de3dd1accb0d3d67926705775a0579dfa397
) # sha256sums
files=( "$@" )
if [ "$#" = 0 ]; then
  for f in gradle-wrapper.jar gradle/wrapper/gradle-wrapper.jar; do
    if [ -e "$f" ]; then
      files+=( "$f" )
    fi
  done
fi
all_ok=yes
for file in "${files[@]}"; do
  echo "checking $file ..."
  sha256sum="$( sha256sum -- "$file" | cut -c-64 )"
  found=no
  for sum in "${sha256sums[@]}"; do
    if [ "$sum" = "$sha256sum" ]; then
      echo OK
      found=yes
      break
    fi
  done
  if [ "$found" = no ]; then
    echo 'not found'
    all_ok=no
  fi
done
[ "$all_ok" = yes ] || exit 1
